var r=Object.defineProperty;var n=(e,t,a)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var s=(e,t,a)=>(n(e,typeof t!="symbol"?t+"":t,a),a);/*!
* Tagin v2.0.2 (https://tagin.netlify.app/)
* Copyright 2020-2022 Erwin Heldy G
* Licensed under MIT (https://github.com/erwinheldy/tagin/blob/master/LICENSE)
*/(function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.Tagin=t())})(this,function(){"use strict";var tagin="";class Tagin{constructor(e,t){s(this,"classElement","tagin");s(this,"classWrapper","tagin-wrapper");s(this,"classTag","tagin-tag");s(this,"classRemove","tagin-tag-remove");s(this,"classInput","tagin-input");s(this,"classInputHidden","tagin-input-hidden");s(this,"target");s(this,"wrapper");s(this,"input");s(this,"separator");s(this,"placeholder");s(this,"duplicate");s(this,"transform");s(this,"enter");this.target=e,this.separator=(t==null?void 0:t.separator)||e.dataset.taginSeparator||",",this.placeholder=(t==null?void 0:t.placeholder)||e.dataset.taginPlaceholder||"",this.duplicate=(t==null?void 0:t.duplicate)||e.dataset.taginDuplicate!==void 0,this.transform=(t==null?void 0:t.transform)||e.dataset.taginTransform||"input => input",this.enter=(t==null?void 0:t.enter)||e.dataset.taginEnter!==void 0,this.createWrapper(),this.autowidth(),this.addEventListener()}createWrapper(){const e=this.getValue()===""?"":this.getValues().map(i=>this.createTag(i)).join(""),t=document.createElement("input");t.type="text",t.className=this.classInput,t.placeholder=this.placeholder;const a=document.createElement("div");a.className=`${this.classWrapper} ${this.target.className}`,a.classList.remove(this.classElement),a.insertAdjacentHTML("afterbegin",e),a.insertAdjacentElement("beforeend",t),this.target.insertAdjacentElement("afterend",a),this.wrapper=a,this.input=t}createTag(e){const t="this.closest('div').dispatchEvent(new CustomEvent('tagin:remove', { detail: this }))";return`<span class="${this.classTag}">${e}<span onclick="${t}" class="${this.classRemove}"></span></span>`}getValue(){return this.target.value.trim()}getValues(){return this.getValue().split(this.separator)}getTags(){return Array.from(this.wrapper.getElementsByClassName(this.classTag)).map(e=>e.textContent)}getTag(){return this.getTags().join(this.separator)}updateValue(){this.target.value=this.getTag(),this.target.dispatchEvent(new Event("change"))}autowidth(){const e=document.createElement("div");e.classList.add(this.classInput,this.classInputHidden);const t=this.input.value||this.input.placeholder||"";e.innerHTML=t.replace(/ /g,"&nbsp;"),document.body.appendChild(e),this.input.style.setProperty("width",Math.ceil(parseInt(window.getComputedStyle(e).width.replace("px","")))+1+"px"),e.remove()}addEventListener(){const e=this.wrapper,t=this.input;e.addEventListener("click",()=>t.focus()),t.addEventListener("focus",()=>e.classList.add("focus")),t.addEventListener("blur",()=>e.classList.remove("focus")),t.addEventListener("input",()=>{this.appendTag(),this.autowidth()}),t.addEventListener("blur",()=>{this.appendTag(!0),this.autowidth()}),t.addEventListener("keydown",a=>{t.value===""&&a.key==="Backspace"&&e.getElementsByClassName(this.classTag).length&&(e.querySelector(`.${this.classTag}:last-of-type`).remove(),this.updateValue()),t.value!==""&&a.key==="Enter"&&this.enter&&(this.appendTag(!0),this.autowidth(),a.preventDefault())}),e.addEventListener("tagin:remove",a=>{a.detail instanceof HTMLSpanElement&&(a.detail.parentElement.remove(),this.updateValue())}),this.target.addEventListener("change",()=>this.updateTag())}appendTag(force=!1){const input=this.input,value=eval(this.transform)(input.value.trim());value===""&&(input.value=""),(input.value.includes(this.separator)||force&&input.value!=="")&&(value.split(this.separator).filter(e=>e!=="").forEach(e=>{this.getTags().includes(e)&&this.duplicate===!1?this.alertExist(e):(input.insertAdjacentHTML("beforebegin",this.createTag(e)),this.updateValue())}),input.value="",input.removeAttribute("style"))}alertExist(e){for(const t of this.wrapper.getElementsByClassName(this.classTag))t.textContent===e&&t instanceof HTMLSpanElement&&(t.style.transform="scale(1.09)",setTimeout(()=>{t.removeAttribute("style")},150))}updateTag(){this.getValue()!==this.getTag()&&([...this.wrapper.getElementsByClassName(this.classTag)].map(e=>e.remove()),this.getValue().trim()!==""&&this.input.insertAdjacentHTML("beforebegin",this.getValues().map(e=>this.createTag(e)).join("")))}addTag(e){this.input.value=(Array.isArray(e)?e.join(this.separator):e)+this.separator,this.input.dispatchEvent(new Event("input"))}}return Tagin});
